<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <link href="styles/style.css" rel ="stylesheet"/>
        <link href="styles/form_styles.css" rel ="stylesheet"/>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" /> 

        <title>T4S Project</title>
    </head>
    <body>
       
        
        <div class="container">
			<form action="signup.html" method="post" id="signup">
				<h1>Sign Up  &nbsp;&nbsp;&nbsp;<a href="file:///Users/annchemutai/Desktop/T4S%20Frontend/home.html">X</a></h1>
        <div class="field">
					<label for="name">Name:</label>
					<input type="text" id="name" name="name" placeholder="Enter your fullname" />
					<small></small>
				</div>
				<div class="field">
					<label for="email">Email:</label>
					<input type="text" id="email" name="email" placeholder="Enter your email address" />
					<small></small>
				</div>
                <div class="field">
					<label for="phone">Phone:</label>
					<input type="text" id="phone" name="phone" placeholder="254721234567" />
					<small></small>
				</div>
                <div class="field">
					<label for="physical_address">Physical Address:</label>
					<input type="text" id="physical_address" name="physical_address" placeholder="Apartment/Estate, County" />
					<small></small>
				</div>
                <div class="field">
					<label for="password">Password:</label>
					<input type="password" id="password" name="password" />
					<small></small>
				</div>
				<div class="field">
					<button type="submit" class="full">Sign up</button>
				</div>
			</form>
		</div>
        <script>
            function hasValue(input, message){
                const msg = input.parentNode.querySelector("small");
                if (input.value.trim() === "") {
                    // re√∑turn showError(input, message);
                    msg.innerText = message;
                    input.className = "error";
                    return false;
                }

                msg.innerText = '';
                input.className = "success";
                return true;
            }
            function validateEmail(input, message){
                // check if the value is not empty
                if (!hasValue(input, message)) {
                    return false;
                }
                // validate email format using regular expression (regex)
                const emailRegex =
                    /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

                const email = input.value.trim();
                const msg = input.parentNode.querySelector("small");
                if (!emailRegex.test(email)) {
                    msg.innerText = message;
                    input.className = "error";
                    return false;
                }
                return true;
            }
            function validatePhone(input, message){
                // check if the value is not empty
                if (!hasValue(input, message)) {
                    return false;
                }
                
                const phone = input.value.trim();
                const msg = input.parentNode.querySelector("small");
                if (phone.length != 12|| isNaN(phone) == true) {
                    msg.innerText = message;
                    input.className = "error";
                    return false;
                }
                return true;
            }
            function validatePassword(input, message){
                // check if the value is not empty
                if (!hasValue(input, message)) {
                    return false;
                }
                
                const password = input.value.trim();
                const msg = input.parentNode.querySelector("small");
                if (password.length < 8) {
                    msg.innerText = message;
                    input.className = "error";
                    return false;
                }
                return true;
            }

            function signup(){

                //console.log(output)

            }
            const form = document.querySelector("#signup");

            const NAME_REQUIRED = "Please enter your name";
            const EMAIL_REQUIRED = "Please enter your email";
            const PHONE_REQUIRED = "Please enter your phone";
            const PHYSICAL_ADDRESS_REQUIRED = "Please enter your physical address";
            const PASSWORD_REQUIRED = "Please enter your password";
            const EMAIL_INVALID = "Please enter a correct email address format";
            const PHONE_INVALID = "Please enter a correct phone number format";
            const PASSWORD_INVALID = "Please enter a password more than 8 characters ";

            form.addEventListener("submit", function (event) {
                // stop form submission
                event.preventDefault();

                // validate the form by calling the functions, 
                //pass the form input and the message to be displayed
                let nameValid = hasValue(form.elements["name"], NAME_REQUIRED);
                let emailValid = validateEmail(form.elements["email"], EMAIL_REQUIRED, EMAIL_INVALID);
                let phoneValid = validatePhone(form.elements["phone"], PHONE_REQUIRED, PHONE_INVALID);
                let physicalAddressValid = hasValue(form.elements["physical_address"], PHYSICAL_ADDRESS_REQUIRED);
                let passwordValid = validatePassword(form.elements["password"], PASSWORD_REQUIRED, PASSWORD_INVALID);
                // if valid, submit the form.
                if (nameValid && emailValid && phoneValid && physicalAddressValid && passwordValid) {
                    alert("Demo only. No form was posted.");
                    console.log(nameValid, emailValid, phoneValid, physicalAddressValid, passwordValid)
                }
            });


        </script>
    </body>
    
</html>